<div class="container mt-4" [formGroup]="formFicha">
  <div class="row">
    <!-- Coluna esquerda: cadastro -->
    <div class="col-md-4">
      
      <!-- Card: Adicionar Exercício -->
      <div class="card mb-4">
        <div class="card-header bg-secondary text-white">
          Adicionar Exercício
        </div>
        <div class="card-body" [formGroup]="formExercicio">
          <!-- Grupo Muscular -->
          <div class="mb-2">
            <label class="form-label">Grupo Muscular</label>
            <select class="form-select" formControlName="grupoMuscular" (change)="filtrarExercicios()">
              <option value="" disabled selected>Selecione o grupo</option>
              <option *ngFor="let grupo of gruposMusculares" [value]="grupo.id">{{ grupo.nome }}</option>
            </select>
          </div>

          <!-- Exercício -->
          <div class="mb-2">
            <label class="form-label">Exercício</label>
            <select class="form-select" formControlName="exercicio">
              <option value="" disabled selected>Selecione o exercício</option>
              <option *ngFor="let exer of exerciciosFiltrados" [value]="exer.id">{{ exer.nome }}</option>
            </select>
          </div>

          <!-- Séries e Repetições -->
          <div class="row">
            <div class="col">
              <label class="form-label">Séries</label>
              <input type="number" class="form-control" formControlName="series">
            </div>
            <div class="col">
              <label class="form-label">Repetições</label>
              <input type="number" class="form-control" formControlName="repeticoes">
            </div>
          </div>

          <!-- Observações -->
          <div class="mt-2">
            <label class="form-label">Observações</label>
            <input type="text" class="form-control" formControlName="observacoes">
          </div>

          <!-- Botão Adicionar -->
          <button class="btn btn-warning w-100 mt-3" type="button" (click)="adicionarExercicio()">Adicionar Exercício</button>
        </div>
      </div>

      <!-- Card: Ficha -->
      <div class="card">
        <div class="card-header bg-primary text-white">Ficha</div>
        <div class="card-body">
          <div class="mb-3">
            <label class="form-label">Tipo de Treino</label>
            <input formControlName="tipo" type="text" class="form-control" placeholder="Ex: A, B, C...">
          </div>
          <div class="mb-3">
            <label class="form-label">Ordem</label>
            <input formControlName="ordem" type="number" class="form-control">
          </div>
        </div>
      </div>

      <button class="btn btn-success w-100 mt-4" (click)="criarFicha()">Criar Ficha</button>
    </div>

    <!-- Coluna direita: Tabela -->
    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-dark text-white">
          Ficha de Treino Atual
        </div>
        <div class="card-body">
          <table class="table table-bordered table-hover">
            <thead class="table-light">
              <tr>
                <th>Exercício</th>
                <th>Grupo</th>
                <th>Séries</th>
                <th>Repetições</th>
                <th>Obs.</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of listaExercicios; let i = index">
                <td>{{ item.exercicio_nome }}</td>
                <td>{{ item.grupo_nome }}</td>
                <td>{{ item.series }}</td>
                <td>{{ item.repeticoes }}</td>
                <td>{{ item.observacoes }}</td>
                <td>
                  <button class="btn btn-sm btn-danger" (click)="removerExercicio(i)">Remover</button>
                </td>
              </tr>
              <tr *ngIf="listaExercicios.length === 0">
                <td colspan="6" class="text-center">Nenhum exercício adicionado.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
